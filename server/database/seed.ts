import { NewValidator } from "../utils/drizzle";
import { getMissingValidators, storeValidator } from "./utils";
import { consola } from 'consola'

export async function seedDatabase() {
  consola.info('Seeding database with validators...')
  for (const validator of validators) {
    const alreadyInDatabase = await getMissingValidators([validator.address]).then(r => r.length === 0)
    if (alreadyInDatabase)
      await useDrizzle().update(tables.validators).set({ ...validator }).where(eq(tables.validators.address, validator.address)).execute()
    else
      await storeValidator(validator.address, validator)
  }
}

type InitialValidator = Omit<NewValidator, 'icon'> & Partial<Pick<NewValidator, 'icon'>>
const validators: InitialValidator[] = [
  {
    name: 'Pooly McPoolface',
    address: 'NQ24 DJE3 KX3U HG5X 1BXP 8XQ3 SK7S X364 N7G7',
    fee: 0.09,
    payoutType: PayoutType.Restake,
    tag: ValidatorTag.Nimiq
  },
  {
    name: 'Cool Pool',
    address: 'NQ87 FEGQ 01TF M29N T03J 3YCB JB5M X5VM XP8Q',
    fee: 0.09,
    payoutType: PayoutType.Direct,
    tag: ValidatorTag.Nimiq
  },
  {
    name: 'Puddle',
    address: 'NQ82 BHPS UR9K 07X1 X6QH 3DY3 J325 UCSP UHV3',
    fee: 0.095,
    payoutType: PayoutType.Direct,
    tag: ValidatorTag.Nimiq
  },
  {
    name: 'Swimming Pool',
    address: 'NQ38 YX2J GTMX 5XAU LKFU H0GS A4AA U26L MDA3',
    fee: 0.1,
    payoutType: PayoutType.Restake,
    tag: ValidatorTag.Nimiq
  },
  {
    name: 'Kiddie Pool',
    address: 'NQ57 UQJL 5A3H N45M 1FHS 2454 C7L5 BTE6 KEU1',
    fee: 0.1,
    payoutType: PayoutType.Restake,
    tag: ValidatorTag.Nimiq
  },
  {
    name: 'Pool Billard',
    address: 'NQ57 2F6C X3GB Y9B7 04U5 2BVA 4BVC M2T0 ELRL',
    fee: 0.105,
    payoutType: PayoutType.Restake,
    tag: ValidatorTag.Nimiq
  },
  {
    name: 'Monopooly',
    address: 'NQ71 CK94 3V7U H62Y 4L0F GUUK DPA4 6SA6 DKKM',
    fee: 0.11,
    payoutType: PayoutType.Direct,
    tag: ValidatorTag.Nimiq
  },
  {
    name: 'Not-A-Pool',
    address: 'NQ08 N4RH FQDL TE7S 8C66 65LT KYDU Q382 YG7U',
    fee: 0.11,
    payoutType: PayoutType.Restake,
    tag: ValidatorTag.Nimiq
  },
  {
    name: 'AceStaking',
    address: 'NQ65 DHN8 4BSR 5YSX FC3V BB5J GKM2 GB2L H17C',
    fee: 0.1,
    payoutType: PayoutType.Direct,
    description: 'The Ace in staking',
    tag: ValidatorTag.Community
  },
  {
    name: 'Mint Pool',
    address: 'NQ57 M1NT JRQA FGD2 HX1P FN2G 611P JNAE K7HN',
    fee: 0.1,
    payoutType: PayoutType.Restake,
    description: 'Minting together',
    website: 'https://mintpool.io',
    icon: 'data:image/svg+xmlbase64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NiIgaGVpZ2h0PSI0MiIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0idXJsKCNhKSIgZD0ibTEwLjI3MyAxLjUzNiA1LjU0IDkuNjMtMTEuNjcuMDJzMy40NC02LjExIDQuNjgtOC4wOWwuMjgtLjQyYTcuMjkgNy4yOSAwIDAgMSAuNzUtLjgybC40Mi0uMzJaIi8+PHBhdGggZmlsbD0idXJsKCNiKSIgZD0iTTMuNDQzIDEzLjcxNmgxNC4wM2w3LjkyIDEzLjc2LTIyLjUyLjA0cy0xLjc1LTIuOTMtMi4yNy0zLjk0YTcuNDA1IDcuNDA1IDAgMCAxLS4zOC0uODcgNS43OCA1Ljc4IDAgMCAxIC4wMy0zLjI4bC4xOS0uNDguMTctLjM1Yy42Ny0xLjI0IDIuODMtNC44OCAyLjgzLTQuODhaIi8+PHBhdGggZmlsbD0idXJsKCNjKSIgZD0iTTQuMDczIDI5Ljk5NmgyMi41bDYuNDIgMTEuMTgtLjIxLjA5LS4yNi4wOS0uMy4xLS4zMi4wOC0uMy4wNC0uMjQuMDMtLjQyLjAycy0xMy4wMi4yMy0xNy4zNiAwYy0uMzk2LS4wMzUtLjc5LS4wOTItMS4xOC0uMTdhNC41MDYgNC41MDYgMCAwIDEtMS4xNS0uNDcgNi40MTYgNi40MTYgMCAwIDEtMS4wNy0uNzhsLS4zMS0uMzJhNy4xMyA3LjEzIDAgMCAxLS40OS0uNjVsLS4zMi0uNTYtNC45OS04LjY4WiIvPjxwYXRoIGZpbGw9InVybCgjZCkiIGQ9Im0zMS43MDMgMzIuNjc2IDMuOTIgNi44NC4xOC0uMTguMTYtLjIuMTUtLjE5LjEtLjE0LjIyLS4zN2EzNjUuMDkgMzY1LjA5IDAgMCAwIDguODMtMTUuMzdsLjEtLjI3LjEtLjMyLjA4LS4yOS4wNi0uMzYuMDQtLjMyLjAyLS4zNXYtLjE3bC0uMDEtLjI0LS4wMS0uMTktLjAzLS4yNS0uMDQtLjI0LS4wNy0uMzEtLjA3LS4yNGEzLjQzNSAzLjQzNSAwIDAgMC0uMTEtLjI5bC0uMTEtLjMtLjEyLS4yNGMtLjcyLTEuMzMtMy4wMS01LjIzLTMuMDEtNS4yM2wtMTAuMzggMTkuMjJaIi8+PHBhdGggZmlsbD0idXJsKCNlKSIgZD0ibTIyLjM2MyAxNi43ODYgNy42NSAxMy4zNCAxMC4zNy0xOS4yMXMtMy4zNi02LjA3LTQuNjMtOGE2LjE2MiA2LjE2MiAwIDAgMC0xLjAzLTEuMTZsLS41Ny0uNDJhNi43MzIgNi43MzIgMCAwIDAtLjQ2LS4yNWwtLjQ4LS4yMWE5LjgyMyA5LjgyMyAwIDAgMC0uNTgtLjE4bC0uNC0uMDdhNS41MiA1LjUyIDAgMCAwLS43OC0uMDhoLS4zNGwtOC43NSAxNi4yNFoiLz48cGF0aCBmaWxsPSJ1cmwoI2YpIiBkPSJNMjguMzIzLjA3NnMtMTEuMDktLjE3LTE0Ljc4IDBsLS4yNi4wMi0uMzguMDYtLjI4LjA2IDguMDUgMTQuMDIgNy42NS0xNC4xNloiLz48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImEiIHgxPSIxNDYuMTQ0IiB4Mj0iOTQuOTE5IiB5MT0iLTM4LjgzMSIgeTI9Ii0xNi4zNTEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBzdG9wLWNvbG9yPSIjNTVDMkIyIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjNDNCRUFCIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImIiIHgxPSI4NS4xMzUiIHgyPSI1OS4yMTUiIHkxPSItMjcuNDg2IiB5Mj0iLTIwLjAxIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iIzU1QzJCMiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzQzQkVBQiIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJjIiB4MT0iNzguODUyIiB4Mj0iNTUuMjkyIiB5MT0iLTQxLjI5MyIgeTI9Ii0zNi4yMjEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBzdG9wLWNvbG9yPSIjNTVDMkIyIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjNDNCRUFCIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImQiIHgxPSI3My45NTciIHgyPSI0OC4xODMiIHkxPSI4Ljg4NyIgeTI9IjM0LjQyIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iIzU1QzJCMiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzQzQkVBQiIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJlIiB4MT0iNjUuODU5IiB4Mj0iNDMuMzY2IiB5MT0iOC43MDQiIHkyPSIyOC4yOTkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBzdG9wLWNvbG9yPSIjNTVDMkIyIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjNDNCRUFCIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImYiIHgxPSI0Mi41MTMiIHgyPSIyOS44NzMiIHkxPSItNS4zMjQiIHkyPSIuODA2IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iIzU1QzJCMiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzQzQkVBQiIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjwvc3ZnPg==',
    tag: ValidatorTag.Community
  },
  {
    name: 'Helvetia Staking',
    address: 'NQ49 E4LQ FN9M B9BP 0FRE BCL5 MHFY TGQE D4XX',
    fee: 0.1,
    payoutType: PayoutType.Restake,
    description: 'The Swiss-standard of NIMIQ Staking',
    icon: 'data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xml%3Aspace%3D%22preserve%22%20viewBox%3D%220%200%201080%20960%22%3E%3Cpath%20fill%3D%22%23FF0D00%22%20d%3D%22M1081%20462c0%2012.354%200%2024.708-.367%2037.297-.764.738-1.326%201.182-1.531%201.754-2.688%207.476-4.442%2015.442-8.146%2022.368-9.609%2017.964-20.018%2035.503-30.204%2053.156-13.368%2023.168-26.87%2046.258-40.234%2069.428-9.289%2016.104-18.37%2032.328-27.675%2048.422-12.898%2022.307-25.987%2044.502-38.867%2066.82-12.147%2021.048-24.055%2042.235-36.202%2063.284-15.735%2027.264-31.625%2054.439-47.403%2081.677-7.31%2012.618-14.546%2025.145-26.362%2034.45-11.22%208.835-23.264%2015.541-37.329%2018.428-.663.136-1.125%201.255-1.68%201.916-162.354%200-324.708%200-487.297-.367-.738-.764-1.19-1.403-1.751-1.521-21.56-4.544-39.59-15.245-51.79-33.498-12.578-18.822-23.58-38.707-35.045-58.26-9.403-16.035-18.438-32.285-27.702-48.402-9.506-16.54-19.112-33.024-28.636-49.554-8.145-14.135-16.19-28.327-24.366-42.444-9.4-16.233-18.95-32.378-28.33-48.622-9.296-16.098-18.424-32.293-27.694-48.407-9.432-16.395-18.937-32.75-28.429-49.11-9.413-16.223-18.881-32.414-28.265-48.654-5.635-9.753-11.006-19.627-12.831-30.98C2.787%20500.7%201.645%20500.39%201%20500c0-12.354%200-24.708.367-37.297.786-1.07%201.281-1.875%201.612-2.743%202.94-7.726%205.044-15.897%208.932-23.107%208.894-16.492%2018.695-32.493%2028.053-48.736%208.3-14.407%2016.452-28.899%2024.757-43.303%209.363-16.24%2018.86-32.403%2028.233-48.639%209.29-16.092%2018.458-32.255%2027.75-48.346%209.373-16.235%2018.873-32.397%2028.245-48.632%209.29-16.093%2018.448-32.26%2027.74-48.352%209.374-16.234%2018.837-32.418%2028.268-48.62a5598.355%205598.355%200%200%201%2018.38-31.395c.378-.38.53-.64.63-.898.003.036-.065.014.308.016%201.715-.585%203.173-.994%204.384-1.783%2036.475-23.759%2073.858-45.935%20113.018-65.03C342.852%202.562%20343.895%201.718%20345%201c146.354%200%20292.708%200%20439.297.367.738.764%201.19%201.403%201.751%201.522%2021.56%204.543%2039.591%2015.244%2051.79%2033.498%2012.578%2018.821%2023.58%2038.707%2035.045%2058.26%209.403%2016.034%2018.439%2032.284%2027.702%2048.402%209.507%2016.54%2019.112%2033.023%2028.637%2049.553%208.145%2014.135%2016.19%2028.327%2024.365%2042.444%209.4%2016.233%2018.95%2032.378%2028.33%2048.622%209.296%2016.099%2018.424%2032.294%2027.694%2048.407%209.433%2016.396%2018.937%2032.75%2028.429%2049.11%209.413%2016.223%2018.882%2032.414%2028.265%2048.654%205.635%209.753%2011.006%2019.628%2012.831%2030.98.078.481%201.218.791%201.864%201.181m-447-96.5V169.319H448V381.556c0%206.442-.003%206.444-6.631%206.444H229.365v186h5.848c68.824%200%20137.649.054%20206.473-.112%205.035-.012%206.441%201.269%206.429%206.374-.171%2068.99-.115%20137.982-.115%20206.973v5.531h186.057v-218.85h218.667V387.858H634V365.5z%22%2F%3E%3Cpath%20fill%3D%22%23FF1C00%22%20d%3D%22M224.275%2069.948c7.288-12.449%2014.338-25.328%2022.77-37.228%209.736-13.739%2024.006-21.838%2039.595-27.604%203.605-1.333%207.32-2.372%2010.672-3.831C312.688%201%20328.375%201%20344.532%201c-.637.718-1.68%201.562-2.855%202.135-39.16%2019.095-76.543%2041.271-113.018%2065.03-1.211.789-2.669%201.198-4.384%201.783z%22%2F%3E%3Cpath%20fill%3D%22%23FFF%22%20d%3D%22M634%20366v21.858h218.724v186.058H634.057v218.85H448v-5.531c0-68.991-.056-137.982.115-206.973.012-5.105-1.394-6.386-6.429-6.374-68.824.166-137.649.112-206.473.112h-5.848V388h212.004c6.628%200%206.63-.002%206.63-6.444L448%20175.083v-5.764h186v196.68z%22%2F%3E%3Cpath%20fill%3D%22%23FF1C00%22%20d%3D%22M223.338%2070.83c-.069-.151.034-.452.381-.844.148.204-.004.465-.381.844z%22%2F%3E%3C%2Fsvg%3E',
    tag: ValidatorTag.Community
  }
]
